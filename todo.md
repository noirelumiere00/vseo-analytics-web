# VSEO Analytics - 開発タスク管理

## Phase 1: 基盤構築
- [x] データベーススキーマ設計（分析履歴、動画データ、OCR結果、音声テキスト）
- [x] tRPCルーター構造設計（分析、履歴、動画収集）
- [x] デザインシステム構築（白ベース×紫-オレンジグラデーション、スイススタイル）

## Phase 2: コア機能実装
- [x] キーワード入力フォーム
- [x] 動画URL入力機能（複数URL対応）
- [ ] 3アカウント×上位20投稿の自動収集ロジック
- [x] 重複度分析エンジン（3アカウント間での動画重複チェック）
- [x] OCR解析機能（2秒/1フレーム）
- [x] 音声の完全文字起こし（Whisper API連携）

## Phase 3: UI/ダッシュボード
- [x] 構成要素の可視化ダッシュボード（サムネイル、テキスト、音声、尺）
- [x] 分析結果のスコアリング表示（チャート形式）
- [x] 分析履歴の保存と閲覧機能
- [x] ローディング状態の実装（分析は時間がかかるため）

## Phase 4: 最終調整
- [ ] エラーハンドリングの強化
- [ ] パフォーマンス最適化
- [ ] チェックポイント作成

## 実装済み機能
- [x] データベーススキーマ（analysis_jobs, videos, ocr_results, transcriptions, analysis_scores）
- [x] 動画分析エンジン（videoAnalysis.ts）
- [x] OCR解析（2秒間隔でのフレーム抽出）
- [x] Whisper API連携（音声の完全文字起こし）
- [x] LLMによるスコアリング（サムネイル、テキスト、音声、総合）
- [x] 重複度分析（3アカウント間での動画重複検出）
- [x] 分析結果表示UI（AnalysisDetailページ）
- [x] 分析履歴表示UI（Historyページ）
- [x] ユニットテスト（videoAnalysis.test.ts - 9テスト全てパス）

## 今後の拡張機能（オプション）
- [ ] 実際のTikTok/YouTube API連携（現在はダミーデータ）
- [ ] 実際のOCR API連携（Google Cloud Vision API等）
- [ ] 実際の動画フレーム抽出（ffmpeg等）
- [ ] 3アカウント×上位20投稿の自動収集機能
- [ ] バックグラウンドジョブ処理（長時間分析の非同期実行）
- [ ] エクスポート機能（CSV、PDF等）

## 緊急修正タスク
- [x] 分析実行ボタンが動作しない問題を修正
- [x] 進捗表示機能の実装（分析中の各ステップを表示）
- [x] 分析実行ロジックの改善（実際に動画データを生成）

## 進捗表示の修正
- [x] 分析開始時に動画レコードを先に作成（進掗0/9ではなく0/0を防ぐ）
- [x] バックグラウンド処理の改善

## 分析レポート機能の実装
- [x] データベーススキーマ拡張（エンゲージメント数値、KOL情報、キーフック、キーワード、ポジネガ判断）
- [x] 各動画の詳細情報をアコーディオン形式で表示
- [x] エンゲージメント数値の表示（いいね数、コメント数、シェア数、視聴回数）
- [x] KOLスプライト情報の表示（投稿者名、フォロワー数等）
- [x] キーフック・キーワード分析の実装
- [x] ポジネガ判断機能の実装
- [x] 分析レポートページの作成（PDF資料の形式に基づく）
